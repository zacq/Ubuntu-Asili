# Netlify Configuration for Ubuntu Asili Africa

[build]
# Build command - runs the Vite build
command = "npm install && npm run build"
# Directory to deploy - where Vite outputs the built files
publish = "dist"

# Environment variables for build
[build.environment]
NODE_VERSION = "20"
NODE_ENV = "production"
NPM_CONFIG_PRODUCTION = "false"

# Redirects for client-side routing (required for React Router)
[[redirects]]
from = "/*"
to = "/index.html"
status = 200

# Cache headers for static assets
[[headers]]
for = "/assets/*"
[headers.values]
Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
for = "/index.html"
[headers.values]
Cache-Control = "public, max-age=0, must-revalidate"

# Context configuration for different environments
[context.production]
command = "npm install && npm run build"

[context.deploy-preview]
command = "npm install && npm run build"
